<section class="fixed inset-0 flex h-[350px] justify-center items-center translate-y-[75px] z-30">
  <div class="absolute flex translate-x-0 will-change-transform pointer-events-auto"
       data-controller="snack-reaction"
       data-snack-reaction-duration-value="4000">

    <%# アニメ（最初に見える） %>
    <div data-snack-reaction-target="animation" class="flex items-center justify-center gap-3">
      <%= image_tag "character/pomemaru/idle.png", class: "w-[260px]", data: { snack_reaction_target: "frame1" } %>
      <%= image_tag "character/pomemaru/smile.png", class: "w-[260px] hidden", data: { snack_reaction_target: "frame2" } %>
    </div>
    <div class="flex justify-center hidden"
         data-snack-reaction-target="frame3Wrapper">
      <%= image_tag "character/pomemaru/idle.png", class: "w-[260px]", data: { snack_reaction_target: "frame3" } %>
    </div>

    <%# セリフ（最初は hidden、数秒後に表示） %>
    <div data-snack-reaction-target="message" class="hidden mt-3">
      <%# ここは「前のchat表示」を流用しやすい形にしてある %>
      <div data-controller="conversation-step">
        <% lines.each_with_index do |line, i| %>
          <p data-conversation-step-target="line" class="<%= i == 0 ? "" : "hidden" %>">
            <%= line %>
          </p>
        <% end %>
        
        <button type="button"
                class="mt-3 px-3 py-1 rounded-full bg-white/80 shadow"
                data-action="click->snack-reaction#close">
          とじる
        </button>

        <%# 次へUIが要るならここに。時間なければ最初の1行だけでも成立する %>
      </div>
    </div>
  </div>
</div>