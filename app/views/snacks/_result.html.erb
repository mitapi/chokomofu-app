<div data-controller="snack-reaction"
     data-snack-reaction-duration-value="2500"
     class="relative">
  <%# アニメ（最初に見える） %>
  <div data-snack-reaction-target="animation" class="flex items-center justify-center gap-3">
    <%= image_tag "character/pomemaru/idle.png", class: "w-[140px] h-[140px]", data: { snack_reaction_target: "frame1" } %>
    <%= image_tag "character/pomemaru/smile.png", class: "w-[140px] h-[140px] hidden", data: { snack_reaction_target: "frame2" } %>
  </div>

  <%# セリフ（最初は hidden、数秒後に表示） %>
  <div data-snack-reaction-target="message" class="hidden mt-3">
    <%# ここは「前のchat表示」を流用しやすい形にしてある %>
    <div data-controller="conversation-step">
      <% lines.each_with_index do |line, i| %>
        <p data-conversation-step-target="line" class="<%= i == 0 ? "" : "hidden" %>">
          <%= line %>
        </p>
      <% end %>

      <%# 次へUIが要るならここに。時間なければ最初の1行だけでも成立する %>
    </div>
  </div>
</div>