<div class="fixed inset-0 z-[9999] pointer-events-auto" data-controller="diary-modal">
  <!-- 背景 -->
  <div
    class="absolute inset-0 bg-black/40 z-0"
    data-action="click->diary-modal#close"></div>

  <!-- 中身 -->
  <div class="absolute inset-0 flex items-center justify-center p-4 z-10 pointer-events-auto">
    <div
      class="w-full max-w-xl rounded-2xl bg-white shadow-xl p-4 relative pointer-events-auto"
      data-action="click->diary-modal#stop">

      <div class="relative w-full max-w-[520px] mx-auto mt-2">
        <!-- タイトル -->
        <div class="text-base font-bold">
          <%= mofu_diary.title %>
        </div>

        <div class="flex items-center justify-center">
          <!-- フレーム画像 -->
          <%= image_tag "diary/frame.png",
                class: "relative w-full h-[450px] select-none pointer-events-none block" %>

          <div class="absolute flex flex-col items-center justify-center px-4 pb-3">
            <div class="flex justify-center">
              <%= image_tag diary_illust_image_path(mofu_diary),
                    alt: "ぽめまる",
                    class: "w-[400px]" %>
            </div>

            <!-- テキスト -->
            <div class="text-[15px] leading-relaxed mt-8">
              <%= mofu_diary.line1 %><br>
              <%= mofu_diary.line2 %>
            </div>

            <!-- 下部情報 -->
            <div class="flex items-center justify-between mt-3 text-xs opacity-70">
              <div>
                <!-- diary_id=<%= mofu_diary.id %> -->
                <!-- user_id=<%= mofu_diary.user_id %> -->
                <%= mofu_diary.date %>
              </div>

              <!-- スタンプ -->
              <div class="flex gap-2">
                <% if (p = weather_stamp_path(mofu_diary.weather_slot)) %>
                  <%= image_tag p, alt: "天気", class: "w-[30px] h-[16px] drop-shadow-sm" %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <% share_url = share_mofu_diary_url(mofu_diary.share_token) %>
        <% text = "#{mofu_diary.title}｜#ちょこもふ" %>
        <div class="my-4 flex gap-2">
          <%= link_to "Xに投稿",
                "https://twitter.com/intent/tweet?text=#{CGI.escape(text)}&url=#{CGI.escape(share_url)}",
                target: "_blank",
                rel: "noopener",
                class: "inline-flex items-center justify-center rounded-xl px-4 py-2 bg-[#ffb92f] hover:bg-[#ffa409] text-white" %>

          <button type="button"
                  class="inline-flex items-center justify-center
                         rounded-xl px-4 py-2 bg-[#bfbcbc] hover:bg-[#a7a3a3] text-white cursor-pointer"
                  data-action="click->diary-modal#close">
            閉じる
          </button>
        </div>

      </div>
    </div>
  </div>
</div>