### ER図
![ER図](./erd/erd_v1.png)


### 本サービスの概要（700文字以内）
**「ちょこっといつでも会いにきて！もふもふ動物が日々の疲れを癒します♪」**
「ちょこっと♪ もふたいむ」は、お気に入りの動物キャラクターと交流することができる癒し系Webアプリです。

癒しが欲しい……動物と暮らしてみたい……そんなあなたにキャラクターが癒しと可愛さをお届けします。

・ニックネームだけで即スタート。

・時間や天気で変化する背景や、選択式で行う会話でキャラクターとの日常を楽しめます。

・「おやつ／おもちゃ」をあげると、キャラクターからの好感度アップ。好感度が上がると特別な会話が解放されます！

操作自体もタップ中心でシンプルです。

通勤前や休憩の5分でも、日常に小さな癒しをお届けします。

あなたも日常のちょこっとした時間に、もふもふ動物に癒されてみませんか？


### MVPで実装する予定の機能
- [x] ニックネーム登録／変更
- [x] キャラクター選択／変更
- [x] アクション（おやつ／おもちゃのどちらか1種類をMVP実装）
- [x] おしゃべり
- [x] 好感度確認


### MVPで実装する予定の機能
- [x] お問い合わせ


### ER図の注意点
- [x] プルリクエストに最新のER図のスクリーンショットを画像が表示される形で掲載できているか？
- [x] テーブル名は複数形になっているか？
- [x] カラムの型は記載されているか？
- [x] 外部キーは適切に設けられているか？
- [x] リレーションは適切に描かれているか？多対多の関係は存在しないか？
- [x] STIは使用しないER図になっているか？
- [x] Postsテーブルにpost_nameのように"テーブル名+カラム名"を付けていないか？


### ER図カラム名について（補足）
nicknameなど分かりやすいカラム名については、説明を省略します。

## 🔸usersテーブル
- guest_uid
初回アクセス時に発行される、匿名ID（UUID）。

- auth_kind
認証の種類。guest、password（拡張でアカウント化したユーザー用。メールアドレス＋パスワード認証という意味から）をenumで作成。

## 🔸user_charactersテーブル
- affinity
好感度用カラム。好感度確認ページでは、このカラムの値を使用して好感度を表示します。

- is_selected
ユーザーがキャラクターを選択しているか否かをbooleanで判別するカラム。

- last_interacted_at
最後にキャラクターと遊んだ時刻を記録するカラム。

## 🔸interactionsテーブル
誰が・どのキャラクターに・何をしたか（おやつ・おもちゃをあげる）を記録するテーブル。

- kind
おもちゃ・おやつどちらの種類なのかをenumで管理するためのカラム。

- happened_at
おやつ・おもちゃをあげた時刻を記録するカラム。日付またぎのズレ防止に使用。（※１）
⚠️※１　23:59におやつを使ったのに、通信が遅れて 00:00 に保存されたら「翌日の回数」にカウントされてしまう……などの日付またぎトラブルを防止するため。

## 🔸conversationsテーブル
キャラクターの話す内容をまとめて管理するためのテーブル。

- kind
「おしゃべり」機能の会話か、メイン画面でキャラクターが自動的に行う「つぶやき」かをenumで区別するためのカラム。

- time_slot・weather_slot
それぞれ時間帯・天気を出し分けするためのカラム。天気や時間帯によって会話内容を変化させるために使用する。

- min_affinity
最小好感度カラム。（好感度によって変わる会話で、）その会話を出すために必要な最低限の好感度を記載するために使用。

## 🔸conversation_choicesテーブル
「おしゃべり」機能の選択肢（ボタン）を管理するテーブルです。

- next_conversation_id
選択肢を押した後、次に表示する会話 の外部キー（conversations.id）。
値が NULL の場合はその場で会話終了、値がある場合は その会話へ遷移 します。
（1回分岐でも2回分岐でも対応できるようにするため）

- label
画面に表示する選択肢の文言を管理します。

- position
同じ conversation_id の中での 表示順。UIを安定表示するために利用します。
